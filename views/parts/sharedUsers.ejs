<% sharedUserLists.forEach((user, index)=> { %>
  <div id="users<%= index %>" class="flex items-center justify-between p-2 border-b border-gray-300">
    <div class="md:flex flex-col">
      <span>
        <%= user.username %>
      </span>
      <span class="text-[#A2A6AD]">
        <%= user.email %>
      </span>
      
      <button class="text-red-600 hover:text-red-800" 
      hx-post="/removeAccess" 
      hx-vals='{"userId": "<%= user.user_id %>"}'
      hx-target="#users<%= index %>" hx-swap="outerHTML swap:0.5s"
      hx-confirm="Are you sure you want to remove access for this user?">
        Remove Access
    </button>
    </div>
    <div class="relative">
      <select
        class="hover:border-[#0CC0DF] hover:cursor-pointer hover:bg-slate-300 border-2 p-1 rounded-md text-gray-700">
        <option value="view" <%=user.permission==='r' ? 'selected' : '' %>>View</option>
        <option value="edit" <%=user.permission==='rw' ? 'selected' : '' %>>Edit</option>
      </select>
    </div>
  </div>
  <% }) %>